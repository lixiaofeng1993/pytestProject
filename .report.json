{"created": 1653727910.1554062, "duration": 1.924919605255127, "exitcode": 1, "root": "E:\\project\\pytestProject", "environment": {"Python": "3.7.0", "Platform": "Windows-10-10.0.19041-SP0", "Packages": {"pytest": "5.4.3", "py": "1.11.0", "pluggy": "0.13.1"}, "Plugins": {"allure-pytest": "2.9.45", "Faker": "11.1.0", "json-report": "1.5.0", "metadata": "2.0.1"}, "JAVA_HOME": "D:\\java\\jdk"}, "summary": {"failed": 1, "total": 1, "collected": 1}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "testcase/__init__.py", "type": "Package"}, {"nodeid": "testcase/sign/__init__.py", "type": "Package"}, {"nodeid": "testcase/users/__init__.py", "type": "Package"}]}, {"nodeid": "testcase/sign/test_sign_case.py::TestSignCase", "outcome": "passed", "result": []}, {"nodeid": "testcase/sign/test_sign_case.py::TestSignCase", "outcome": "passed", "result": [{"nodeid": "testcase/sign/test_sign_case.py::TestSignCase", "type": "Instance"}]}, {"nodeid": "testcase/sign/test_sign_case.py", "outcome": "passed", "result": [{"nodeid": "testcase/sign/test_sign_case.py::TestSignCase", "type": "Class"}]}, {"nodeid": "testcase/users/test_users_case.py::TestUsersCase", "outcome": "passed", "result": [{"nodeid": "testcase/users/test_users_case.py::TestUsersCase::test_user_me_case", "type": "Function", "lineno": 37}]}, {"nodeid": "testcase/users/test_users_case.py::TestUsersCase", "outcome": "passed", "result": [{"nodeid": "testcase/users/test_users_case.py::TestUsersCase", "type": "Instance"}]}, {"nodeid": "testcase/users/test_users_case.py", "outcome": "passed", "result": [{"nodeid": "testcase/users/test_users_case.py::TestUsersCase", "type": "Class"}]}, {"nodeid": "testcase/__init__.py", "outcome": "passed", "result": [{"nodeid": "testcase/sign/test_sign_case.py", "type": "Module"}, {"nodeid": "testcase/users/test_users_case.py", "type": "Module"}]}, {"nodeid": "testcase/sign/__init__.py", "outcome": "passed", "result": []}, {"nodeid": "testcase/users/__init__.py", "outcome": "passed", "result": []}], "tests": [{"nodeid": "testcase/users/test_users_case.py::TestUsersCase::test_user_me_case", "lineno": 37, "outcome": "failed", "keywords": ["test_user_me_case", "allure_label", "pytestProject", "TestUsersCase", "()", "test_users_case.py", "testcase/__init__.py"], "setup": {"duration": 0.9016599655151367, "outcome": "passed", "stderr": "[2022-05-28 16:51:49,817][common.py 48][INFO]: \u63d0\u53d6\u66ff\u6362\u7684\u6570\u636e ==>> sql_query_name -> 13022570062\r\n[2022-05-28 16:51:49,998][common.py 48][INFO]: \u63d0\u53d6\u66ff\u6362\u7684\u6570\u636e ==>> sql_query_email -> mogang@yongkang.cn\r\n", "log": [{"name": "root", "msg": "\u63d0\u53d6\u66ff\u6362\u7684\u6570\u636e ==>> sql_query_name -> 13022570062", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\public\\common.py", "filename": "common.py", "module": "common", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 48, "funcName": "replace_variable", "created": 1653727909.8179796, "msecs": 817.9795742034912, "relativeCreated": 2672.536849975586, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:49,817"}, {"name": "root", "msg": "\u63d0\u53d6\u66ff\u6362\u7684\u6570\u636e ==>> sql_query_email -> mogang@yongkang.cn", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\public\\common.py", "filename": "common.py", "module": "common", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 48, "funcName": "replace_variable", "created": 1653727909.998858, "msecs": 998.8579750061035, "relativeCreated": 2853.4152507781982, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:49,998"}]}, "call": {"duration": 0.01196742057800293, "outcome": "failed", "crash": {"path": "E:\\project\\pytestProject\\public\\common.py", "lineno": 280, "message": "AssertionError: \u63a5\u53e3\u8fd4\u56de\u5b57\u6bb5 name \u65ad\u8a00\u9519\u8bef\uff01"}, "traceback": [{"path": "testcase\\users\\test_users_case.py", "lineno": 43, "message": ""}, {"path": "public\\send_request.py", "lineno": 66, "message": "in send_request"}, {"path": "public\\common.py", "lineno": 280, "message": "AssertionError"}], "stderr": "[2022-05-28 16:51:50,005][test_users_case.py 39][INFO]: *************** \u5f00\u59cb\u6267\u884c\u7528\u4f8b ***************\r\n[2022-05-28 16:51:50,007][bae_request.py 39][INFO]: \u63a5\u53e3\u8bf7\u6c42\u5730\u5740 ==>> http://127.0.0.1:8000/users/me\r\n[2022-05-28 16:51:50,007][bae_request.py 40][INFO]: \u63a5\u53e3\u8bf7\u6c42\u65b9\u5f0f ==>> GET\r\n[2022-05-28 16:51:50,007][bae_request.py 42][INFO]: \u63a5\u53e3\u8bf7\u6c42\u5934 ==>> {\r\n    \"Authorization\": \"Bearer None\"\r\n}\r\n[2022-05-28 16:51:50,008][bae_request.py 43][INFO]: \u63a5\u53e3\u8bf7\u6c42 params \u53c2\u6570 ==>> {}\r\n[2022-05-28 16:51:50,008][bae_request.py 44][INFO]: \u63a5\u53e3\u8bf7\u6c42\u4f53 data \u53c2\u6570 ==>> \r\n[2022-05-28 16:51:50,008][bae_request.py 45][INFO]: \u63a5\u53e3\u8bf7\u6c42\u4f53 json \u53c2\u6570 ==>> {}\r\n[2022-05-28 16:51:50,011][bae_request.py 46][INFO]: \u63a5\u53e3\u4e0a\u4f20\u9644\u4ef6 files \u53c2\u6570 ==>> []\r\n[2022-05-28 16:51:50,015][bae_request.py 54][INFO]: \u63a5\u53e3\u8fd4\u56de\u4fe1\u606f ==>> {'detail': {'code': 10000, 'message': 'token\u6821\u9a8c\u5931\u8d25\uff01'}}\r\n[2022-05-28 16:51:50,016][common.py 271][INFO]: \u65ad\u8a00\u65b9\u5f0f\uff1aequal \u65ad\u8a00\u5b57\u6bb5\uff1aname ==>> \u65ad\u8a00\u503c\uff1alixiaofeng ==>> \u671f\u671b\u503c\uff1aFalse\r\n", "log": [{"name": "root", "msg": "*************** \u5f00\u59cb\u6267\u884c\u7528\u4f8b ***************", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\testcase\\users\\test_users_case.py", "filename": "test_users_case.py", "module": "test_users_case", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 39, "funcName": "test_user_me_case", "created": 1653727910.0058084, "msecs": 5.808353424072266, "relativeCreated": 2860.365629196167, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,005"}, {"name": "root", "msg": "\u63a5\u53e3\u8bf7\u6c42\u5730\u5740 ==>> http://127.0.0.1:8000/users/me", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\base\\bae_request.py", "filename": "bae_request.py", "module": "bae_request", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 39, "funcName": "request", "created": 1653727910.0078037, "msecs": 7.803678512573242, "relativeCreated": 2862.360954284668, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,007"}, {"name": "root", "msg": "\u63a5\u53e3\u8bf7\u6c42\u65b9\u5f0f ==>> GET", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\base\\bae_request.py", "filename": "bae_request.py", "module": "bae_request", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 40, "funcName": "request", "created": 1653727910.0078037, "msecs": 7.803678512573242, "relativeCreated": 2862.360954284668, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,007"}, {"name": "root", "msg": "\u63a5\u53e3\u8bf7\u6c42\u5934 ==>> {\n    \"Authorization\": \"Bearer None\"\n}", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\base\\bae_request.py", "filename": "bae_request.py", "module": "bae_request", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 42, "funcName": "request", "created": 1653727910.0078037, "msecs": 7.803678512573242, "relativeCreated": 2862.360954284668, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,007"}, {"name": "root", "msg": "\u63a5\u53e3\u8bf7\u6c42 params \u53c2\u6570 ==>> {}", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\base\\bae_request.py", "filename": "bae_request.py", "module": "bae_request", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 43, "funcName": "request", "created": 1653727910.0088012, "msecs": 8.80122184753418, "relativeCreated": 2863.358497619629, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,008"}, {"name": "root", "msg": "\u63a5\u53e3\u8bf7\u6c42\u4f53 data \u53c2\u6570 ==>> ", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\base\\bae_request.py", "filename": "bae_request.py", "module": "bae_request", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 44, "funcName": "request", "created": 1653727910.0088012, "msecs": 8.80122184753418, "relativeCreated": 2863.358497619629, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,008"}, {"name": "root", "msg": "\u63a5\u53e3\u8bf7\u6c42\u4f53 json \u53c2\u6570 ==>> {}", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\base\\bae_request.py", "filename": "bae_request.py", "module": "bae_request", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 45, "funcName": "request", "created": 1653727910.0088012, "msecs": 8.80122184753418, "relativeCreated": 2863.358497619629, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,008"}, {"name": "root", "msg": "\u63a5\u53e3\u4e0a\u4f20\u9644\u4ef6 files \u53c2\u6570 ==>> []", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\base\\bae_request.py", "filename": "bae_request.py", "module": "bae_request", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 46, "funcName": "request", "created": 1653727910.011792, "msecs": 11.79194450378418, "relativeCreated": 2866.349220275879, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,011"}, {"name": "root", "msg": "\u63a5\u53e3\u8fd4\u56de\u4fe1\u606f ==>> {'detail': {'code': 10000, 'message': 'token\u6821\u9a8c\u5931\u8d25\uff01'}}", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\base\\bae_request.py", "filename": "bae_request.py", "module": "bae_request", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 54, "funcName": "request", "created": 1653727910.0157812, "msecs": 15.781164169311523, "relativeCreated": 2870.3384399414062, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,015"}, {"name": "root", "msg": "\u65ad\u8a00\u65b9\u5f0f\uff1aequal \u65ad\u8a00\u5b57\u6bb5\uff1aname ==>> \u65ad\u8a00\u503c\uff1alixiaofeng ==>> \u671f\u671b\u503c\uff1aFalse", "args": null, "levelname": "INFO", "levelno": 20, "pathname": "E:\\project\\pytestProject\\public\\common.py", "filename": "common.py", "module": "common", "exc_info": null, "exc_text": null, "stack_info": null, "lineno": 271, "funcName": "validators_result", "created": 1653727910.0167785, "msecs": 16.77846908569336, "relativeCreated": 2871.335744857788, "thread": 4464, "threadName": "MainThread", "processName": "MainProcess", "process": 15752, "asctime": "2022-05-28 16:51:50,016"}], "longrepr": "self = <testcase.users.test_users_case.TestUsersCase object at 0x00000218DF9C5080>\ntest_data = <public.case_step.ObjectData object at 0x00000218DFAAB6D8>\n\n    def test_user_me_case(self, test_data):\n        logger.info(\"*************** \u5f00\u59cb\u6267\u884c\u7528\u4f8b ***************\")\n        # \u62a5\u544a\u5c55\u793a\u7684\u6d4b\u8bd5\u6b65\u9aa4\n        report_step_setting(test_data)\n    \n>       result, self.extract = SendRequest(test_data, self.extract).send_request()\n\ntestcase\\users\\test_users_case.py:43: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npublic\\send_request.py:66: in send_request\n    validators_result(result, validate)  # \u65ad\u8a00\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nresult = <base.base_result.BaseResult object at 0x00000218DFAAB940>\nvalidate = [[{'comparator': 'equal'}, {'check': 'name'}, {'expect': 'lixiaofeng'}, {'jsonpath': '$.result.name'}]]\n\n    def validators_result(result, validate: list):\n        \"\"\"\n        \u65ad\u8a00\n        :param result:\n        :param validate:\n        :return:\n        \"\"\"\n        try:\n            validate = validate if validate and validate[0] else []\n        except (IndexError, KeyError):\n            validate = []\n        response = result.text\n        checkpoint_list = list()\n        if not validate:\n            checkpoint_list = [{\"comparator\": \"equal\", \"check\": \"status_code\", \"expect\": \"200\", \"jsonpath\": \"\"}]\n        elif isinstance(validate, list):\n            for val in validate:\n                checkpoint = dict()\n                if isinstance(val, list):\n                    for v in val:\n                        checkpoint.update(v)\n                checkpoint_list.append(checkpoint)\n        for checkpoint in checkpoint_list:\n            if isinstance(checkpoint, dict):\n                comparator = checkpoint[\"comparator\"] if checkpoint.get(\"comparator\") else \"\"\n                check = checkpoint.get(\"check\")\n                expect = checkpoint.get(\"expect\")\n                path = checkpoint[\"jsonpath\"] if checkpoint.get(\"jsonpath\") else \"\"\n                if check == \"status_code\":\n                    check_field = result.status_code\n                elif path:\n                    check_field = jsonpath(response, path)\n                else:\n                    check_field = default_extract(response, check)\n                logger.info(f\"\u65ad\u8a00\u65b9\u5f0f\uff1a{comparator} \u65ad\u8a00\u5b57\u6bb5\uff1a{check} ==>> \u65ad\u8a00\u503c\uff1a{expect} ==>> \u671f\u671b\u503c\uff1a{check_field}\")\n                expect = expect if isinstance(expect, str) else str(expect)\n                if comparator == \"equal\":\n                    if isinstance(check_field, list):\n                        for field in check_field:\n                            field = str(field) if not isinstance(field, str) else field\n                            assert field == expect, error_msg(check)\n                    else:\n                        check_field = check_field if isinstance(check_field, str) else str(check_field)\n>                       assert check_field == expect, error_msg(check)\nE                       AssertionError: \u63a5\u53e3\u8fd4\u56de\u5b57\u6bb5 name \u65ad\u8a00\u9519\u8bef\uff01\n\npublic\\common.py:280: AssertionError"}, "teardown": {"duration": 0.004986286163330078, "outcome": "passed"}}]}